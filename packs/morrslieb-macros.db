{"name":"Toggle Morrslieb","type":"script","author":"uYMUUn3ngwAi1DKo","img":"modules/wfrp4e-morrsliebphase/moon/Morrslieb.webp","scope":"global","command":"let morrsliebActive = canvas.scene.getFlag(\"wfrp4e\", \"morrslieb\")\n    morrsliebActive = !morrsliebActive\n    await canvas.scene.setFlag(\"wfrp4e\", \"morrslieb\", morrsliebActive)\n    if (game.modules.get(\"fxmaster\") && game.modules.get(\"fxmaster\").active) {\n      FXMASTER.filters.switch(\"morrslieb\", \"color\", CONFIG.MorrsliebObject)}\n    else {\n      game.socket.emit(\"system.wfrp4e\", {\n        type: \"morrslieb\"})\n      canvas.draw();}","folder":null,"sort":0,"permission":{"default":0,"CFuphnvvMWNN4aGH":3,"uYMUUn3ngwAi1DKo":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.PTLEg7QmjgIMOQI2"}},"_id":"Gmr1KPcXqZnwGf3T"}
{"name":"Morsslieb Phase","type":"script","author":"geo77Tlq2b1uvZat","img":"modules/wfrp4e-morrsliebphase/moon/Morrslieb.webp","scope":"global","command":"const table = game.tables.find(t => t.name == game.i18n.localize(\"TableLanguage\"));\nlet roll = await table.draw();\n\nlet morrsliebActive = canvas.scene.getFlag(\"wfrp4e\", \"morrslieb\")\nif (morrsliebActive)\nreturn\nelse\n{\nif (roll.results[0].data.text == game.i18n.localize(\"FullMoon\"))\n {\n    morrsliebActive = !morrsliebActive\n    await canvas.scene.setFlag(\"wfrp4e\", \"morrslieb\", morrsliebActive)\n    if (game.modules.get(\"fxmaster\") && game.modules.get(\"fxmaster\").active) {\n      FXMASTER.filters.switch(\"morrslieb\", \"color\", CONFIG.MorrsliebObject)}\n    else {\n      game.socket.emit(\"system.wfrp4e\", {\n        type: \"morrslieb\"})\n      canvas.draw();}\n }\n}","folder":null,"sort":0,"permission":{"default":0,"geo77Tlq2b1uvZat":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.JQzROCRSoKreFTBz"}},"_id":"JXGrby0IGImCp4ey"}
