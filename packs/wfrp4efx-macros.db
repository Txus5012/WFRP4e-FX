{"name":"Entangled","type":"script","author":"CFuphnvvMWNN4aGH","img":"systems/wfrp4e/icons/conditions/entangled.png","scope":"global","command":"if (args[0] === \"on\") {\nlet params = \n[{\n    filterType: \"web\",\n    filterId: \"Entangled\",\n    time: 0,\n    thickness: 0.4,\n}]\nawait TokenMagic.addUpdateFiltersOnSelected(params);\n}\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFiltersOnSelected(\"Entangled\");\n}","folder":null,"sort":0,"permission":{"default":0,"Njc5YzFjZDI5NjZl":3,"CFuphnvvMWNN4aGH":3},"flags":{"core":{"sourceId":"Compendium.tokenmagic.tmMacros.ki2AEmXzUJkGpU65"},"scene-packer":{"hash":"a2501b7eb78176a72a67540a5bcb6f6064269272","sourceId":"Macro.IkN63KTH9RbDdLRe"}},"_id":"9x4e6sJwRtFOF0Jl"}
{"name":"Toggle Morrslieb","type":"script","author":"uYMUUn3ngwAi1DKo","img":"modules/wfrp4e-fx/moon/Morrslieb.webp","scope":"global","command":"let morrsliebActive = canvas.scene.getFlag(\"wfrp4e\", \"morrslieb\")\n    morrsliebActive = !morrsliebActive\n    await canvas.scene.setFlag(\"wfrp4e\", \"morrslieb\", morrsliebActive)\n    if (game.modules.get(\"fxmaster\") && game.modules.get(\"fxmaster\").active) {\n      FXMASTER.filters.switch(\"morrslieb\", \"color\", CONFIG.MorrsliebObject)}\n    else {\n      game.socket.emit(\"system.wfrp4e\", {\n        type: \"morrslieb\"})\n      canvas.draw();}","folder":null,"sort":0,"permission":{"default":0,"CFuphnvvMWNN4aGH":3,"uYMUUn3ngwAi1DKo":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.PTLEg7QmjgIMOQI2"}},"_id":"Gmr1KPcXqZnwGf3T"}
{"name":"Fear","type":"script","author":"CFuphnvvMWNN4aGH","img":"systems/wfrp4e/icons/conditions/fear.png","scope":"global","command":"if (args[0] === \"on\") {\nlet params =\n    [{\n        filterType: \"transform\",\n        filterId: \"Fear\",\n        padding: 50,\n        animated:\n        {\n            translationX:\n            {\n                animType: \"sinOscillation\",\n                val1: -0.00125,\n                val2: +0.00125,\n                loopDuration: 100,\n            },\n            translationY:\n            {\n                animType: \"cosOscillation\",\n                val1: -0.0015,\n                val2: +0.0015,\n                loopDuration: 100,\n            }\n        }\n    }];\nawait TokenMagic.addUpdateFiltersOnSelected(params);\n}\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFiltersOnSelected(\"Fear\");\n}","folder":null,"sort":0,"permission":{"default":0,"CFuphnvvMWNN4aGH":3},"flags":{"scene-packer":{"hash":"6647d7a04f9da0eb387c40a228ea6d122c79dfa8","sourceId":"Macro.3bjNjyJMVKkJFOd0"},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.3bjNjyJMVKkJFOd0"}},"_id":"JmfNujbBCQ0wuhp6"}
{"name":"Broken","type":"script","author":"CFuphnvvMWNN4aGH","img":"systems/wfrp4e/icons/conditions/broken.png","scope":"global","command":"if (args[0] === \"on\") {\nlet params =\n    [{\n        filterType: \"transform\",\n        filterId: \"Broken\",\n        padding: 50,\n        animated:\n        {\n            translationX:\n            {\n                animType: \"sinOscillation\",\n                val1: -0.0125,\n                val2: +0.0125,\n                loopDuration: 200,\n            },\n            translationY:\n            {\n                animType: \"cosOscillation\",\n                val1: -0.0035,\n                val2: +0.0035,\n                loopDuration: 200,\n            }\n        }\n    }];\nawait TokenMagic.addUpdateFiltersOnSelected(params);\n}\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFiltersOnSelected(\"Broken\");\n}","folder":null,"sort":0,"permission":{"default":0,"Njc5YzFjZDI5NjZl":3,"CFuphnvvMWNN4aGH":3},"flags":{"furnace":{"runAsGM":false},"core":{"sourceId":"Compendium.tokenmagic.tmMacros.0U6lS2hR1uMm7iFI"},"scene-packer":{"hash":"4e077df31eb9ccbe67b8e51473321bce7f397000","sourceId":"Macro.z9NfkFLHxJt2murp"}},"_id":"PpAEdxe9ImrNKHFa"}
{"name":"Cold Exposure","type":"script","author":"CFuphnvvMWNN4aGH","img":"icons/magic/water/snowflake-ice-blue-white.webp","scope":"global","command":"if (args[0] === \"on\") {\nlet params =\n    [{\n        filterType: \"smoke\",\n        filterId: \"Cold\",\n        color: 0x80CCFF,\n        time: 0,\n        blend: 2,\n        dimX: 0.3,\n        dimY: 1,\n        animated:\n        {\n            time:\n            {\n                active: true,\n                speed: -0.006,\n                animType: \"move\"\n            },\n            dimY:\n            {\n                val1: 0.4, val2: 0.2,\n                animType: \"cosOscillation\",\n                loopDuration: 3000\n            }\n        }\n    }];\nawait TokenMagic.addUpdateFiltersOnSelected(params);\n}\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFiltersOnSelected(\"Cold\");\n}","folder":null,"sort":0,"permission":{"default":0,"Njc5YzFjZDI5NjZl":3,"CFuphnvvMWNN4aGH":3},"flags":{"core":{"sourceId":"Compendium.tokenmagic.tmMacros.QkPSIfIOf72oD49L"},"scene-packer":{"hash":"426420e3647f6845308e2ae3031687f47d403f76","sourceId":"Macro.BHLQbPF3bVkpjIvh"}},"_id":"TIHeGzzW0OBFaySn"}
{"name":"Blinded","type":"script","author":"CFuphnvvMWNN4aGH","img":"systems/wfrp4e/icons/conditions/blinded.png","scope":"global","command":"if (args[0] === \"on\") {\nlet params =\n[{\n    filterType: \"fumes\",\n    filterId: \"Blinded\",\n    color: 0x151515,\n    time: 0,\n    blend: 8,\n    animated :\n    {\n      time : \n      { \n        active: true, \n        speed: 0.001, \n        animType: \"move\" \n      }\n    }\n}];\nawait TokenMagic.addUpdateFiltersOnSelected(params);\n}\n\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFiltersOnSelected(\"Blinded\");\n}","flags":{"furnace":{"runAsGM":false},"core":{"sourceId":"Compendium.tokenmagic.tmMacros.ebWbFeiJP8UZG4Fd"},"scene-packer":{"hash":"1bc92cc27b8bc60959f5927e328d788ef49823c7","sourceId":"Macro.uwb4PeLqhfAhgfme"},"advanced-macros":{"runAsGM":false}},"ownership":{"default":0,"CFuphnvvMWNN4aGH":3},"_stats":{"systemId":"wfrp4e","systemVersion":"6.1.4","coreVersion":"10.287","createdTime":1665218605844,"modifiedTime":1665420211553,"lastModifiedBy":"CFuphnvvMWNN4aGH"},"folder":null,"sort":0,"_id":"VsIZrgQrW0WHEWIk"}
{"name":"Stunned","type":"script","author":"CFuphnvvMWNN4aGH","img":"systems/wfrp4e/icons/conditions/stunned.png","scope":"global","command":"if (args[0] === \"on\") {\nlet params =\n[{\n    filterType: \"blur\",\n    filterId: \"Stunned\",\n    padding: 10,\n    quality: 4.0,\n    blur: 0,\n    blurX: 0,\n    blurY: 0,\n    animated:\n    {\n        blurX: \n        { \n           active: true, \n           animType: \"syncCosOscillation\", \n           loopDuration: 1500, \n           val1: 3, \n           val2: 6\n        },\n        blurY: \n        { \n           active: true, \n           animType: \"syncCosOscillation\", \n           loopDuration: 1750, \n           val1: 3, \n           val2: 6}\n    }\n}];\nawait TokenMagic.addUpdateFiltersOnSelected(params);\n}\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFiltersOnSelected(\"Stunned\");\n}","folder":null,"sort":0,"permission":{"default":0,"Njc5YzFjZDI5NjZl":3,"CFuphnvvMWNN4aGH":3},"flags":{"core":{"sourceId":"Compendium.tokenmagic.tmMacros.CdFhWPKBMb5wj7cM"},"scene-packer":{"hash":"c10b076fb38825a2f4126e3efc05fc343011571d","sourceId":"Macro.O6BWprigvPiZNGvo"}},"_id":"Y69ywmQwQU2Bci59"}
{"name":"Heat Exposure","type":"script","author":"CFuphnvvMWNN4aGH","img":"icons/magic/fire/flame-burning-earth-orange.webp","scope":"global","command":"if (args[0] === \"on\") {\nlet params =\n    [{\n        filterType: \"smoke\",\n        filterId: \"Heat\",\n        color: 0xDF641F,\n        time: 0,\n        blend: 2,\n        dimX: 0.3,\n        dimY: 1,\n        animated:\n        {\n            time:\n            {\n                active: true,\n                speed: -0.006,\n                animType: \"move\"\n            },\n            dimX:\n            {\n                val1: 0.4, val2: 0.2,\n                animType: \"cosOscillation\",\n                loopDuration: 3000\n            }\n        }\n    }];\nawait TokenMagic.addUpdateFiltersOnSelected(params);\n}\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFiltersOnSelected(\"Heat\");\n}","folder":null,"sort":0,"permission":{"default":0,"Njc5YzFjZDI5NjZl":3,"CFuphnvvMWNN4aGH":3},"flags":{"core":{"sourceId":"Compendium.tokenmagic.tmMacros.QkPSIfIOf72oD49L"},"scene-packer":{"hash":"b533559048ac47e56c882b055ea3c4d34ae57cb3","sourceId":"Macro.DI8lMamQx2ZETXPi"}},"_id":"YHCknZRAndHhqaaO"}
{"name":"Poisoned","type":"script","author":"CFuphnvvMWNN4aGH","img":"systems/wfrp4e/icons/conditions/poisoned.png","scope":"global","command":"if (args[0] === \"on\") {\nlet params =\n[{\n    filterType: \"field\",\n    filterId: \"Poisoned\",\n    shieldType: 3,\n    gridPadding: 1,\n    color: 0x25b11b,\n    time: 0,\n    blend: 0,\n    intensity: 0.9,\n    lightAlpha: 1,\n    lightSize: 0.7,\n    scale: 1,\n    radius: 1,\n    chromatic: false,\n    zOrder: 512,\n    animated :\n    {\n      time : \n      { \n        active: true, \n        speed: 0.0015, \n        animType: \"move\" \n      }\n    }\n}];\nawait TokenMagic.addUpdateFiltersOnSelected(params);\n}\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFiltersOnSelected(\"Poisoned\");\n}","folder":null,"sort":0,"permission":{"default":0,"CFuphnvvMWNN4aGH":3},"flags":{"scene-packer":{"hash":"1c402165b5dc6286e69c9e39e3ae9cc84b08dfad","sourceId":"Macro.FpJrBp6TjFL0tSlc"},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.FpJrBp6TjFL0tSlc"}},"_id":"YzbaAGT1nDDqk28M"}
{"name":"Ablaze","type":"script","author":"CFuphnvvMWNN4aGH","img":"systems/wfrp4e/icons/conditions/ablaze.png","scope":"global","command":"if (args[0] === \"on\") {\nlet params =\n[{\n    filterType: \"fire\",\n    filterId: \"Ablaze\",\n    intensity: 1,\n    color: 0xFFFFFF,\n    amplitude: 1,\n    time: 0,\n    blend: 2,\n    fireBlend : 1,\n    animated :\n    {\n      time : \n      { \n        active: true, \n        speed: -0.0024, \n        animType: \"move\" \n      },\n      intensity:\n      {\n        active:true,\n        loopDuration: 15000,\n        val1: 0.8,\n        val2: 2,\n        animType: \"syncCosOscillation\"\n      },\n      amplitude:\n      {\n        active:true,\n        loopDuration: 4400,\n        val1: 1,\n        val2: 1.4,\n        animType: \"syncCosOscillation\"\n      }\n    }\n}];\nawait TokenMagic.addUpdateFiltersOnSelected(params);\n\nif (game.settings.get(moduleID, 'light&vision')) {\n for ( const token of canvas.tokens.controlled ) {\n  await token.document.update({\n    light: {\n    alpha: 0.25,\n    animation: {\n       intensity: 4,\n       speed: 4,\n       type: \"flame\"\n       },\n   color: \"#ffaa00\",\n   dim: 15,\n   bright: 7.5\n   }})\ntoken.refresh(true)\n}}}\n\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFiltersOnSelected(\"Ablaze\");\n\nif (game.settings.get(moduleID, 'light&vision')) {\n for ( const token of canvas.tokens.controlled ) {\n  await token.document.update({\n    light: {\n    alpha: 0,\n    animation: {\n       intensity: 0,\n       speed: 0,\n       type: \"none\"\n       },\n   color: null,\n   dim: 0,\n   bright: 0\n   }})\ntoken.refresh(true)\n}}}","flags":{"scene-packer":{"hash":"85d4901ac1362b870da4d5b6c7e719327817e732","sourceId":"Macro.tSLHvf9LzAQ68W97"},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.tSLHvf9LzAQ68W97"}},"ownership":{"default":0,"CFuphnvvMWNN4aGH":3},"_stats":{"systemId":"wfrp4e","systemVersion":"6.1.4","coreVersion":"10.287","createdTime":1665218604109,"modifiedTime":1665422458690,"lastModifiedBy":"CFuphnvvMWNN4aGH"},"folder":null,"sort":0,"_id":"eLhdaZgYb26jwWSn"}
{"name":"Morsslieb Phase","type":"script","author":"CFuphnvvMWNN4aGH","img":"modules/wfrp4e-fx/moon/Morrslieb.webp","scope":"global","command":"let morrsliebActive = canvas.scene.getFlag(\"wfrp4e\", \"morrslieb\")\nif (morrsliebActive) {\n    morrsliebActive = !morrsliebActive\n    await canvas.scene.setFlag(\"wfrp4e\", \"morrslieb\", morrsliebActive)\n    if (game.modules.get(\"fxmaster\") && game.modules.get(\"fxmaster\").active) {\n      FXMASTER.filters.switch(\"morrslieb\", \"color\", CONFIG.MorrsliebObject)}\n    else {\n      game.socket.emit(\"system.wfrp4e\", {\n        type: \"morrslieb\"})\n      canvas.draw();}\n}\nelse\n{\nconst table = game.tables.find(t => t.name == game.i18n.localize(\"MORRSLIEB.TableLanguage\"));\nlet roll = await table.draw();\nif (roll.results[0].data.text == game.i18n.localize(\"MORRSLIEB.FullMoon\"))\n {\n    morrsliebActive = !morrsliebActive\n    await canvas.scene.setFlag(\"wfrp4e\", \"morrslieb\", morrsliebActive)\n    if (game.modules.get(\"fxmaster\") && game.modules.get(\"fxmaster\").active) {\n      FXMASTER.filters.switch(\"morrslieb\", \"color\", CONFIG.MorrsliebObject)}\n    else {\n      game.socket.emit(\"system.wfrp4e\", {\n        type: \"morrslieb\"})\n      canvas.draw();}\n }\n}","folder":null,"sort":0,"permission":{"default":0,"CFuphnvvMWNN4aGH":3},"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.JQzROCRSoKreFTBz"},"scene-packer":{"hash":"3e7b3c26d27fec8238e31f07d4900e97a9c10223","sourceId":"Macro.JXGrby0IGImCp4ey"}},"_id":"eiR9DzHuUfiNaNPJ"}
{"name":"Consume Alcohol","type":"script","author":"CFuphnvvMWNN4aGH","img":"icons/consumables/drinks/alcohol-beer-stein-wooden-brown.webp","scope":"global","command":"if (args[0] === \"on\") {\nlet params =\n[{\n    filterType: \"blur\",\n    filterId: \"Alcohol\",\n    padding: 10,\n    quality: 4.0,\n    blur: 0,\n    blurX: 0,\n    blurY: 0,\n    animated:\n    {\n        blurX: \n        { \n           active: true, \n           animType: \"syncCosOscillation\", \n           loopDuration: 1500, \n           val1: 3, \n           val2: 6\n        },\n        blurY: \n        { \n           active: true, \n           animType: \"syncCosOscillation\", \n           loopDuration: 1750, \n           val1: 3, \n           val2: 6}\n    }\n}];\nawait TokenMagic.addUpdateFiltersOnSelected(params);\n}\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFiltersOnSelected(\"Alcohol\");\n}","folder":null,"sort":0,"permission":{"default":0,"Njc5YzFjZDI5NjZl":3,"CFuphnvvMWNN4aGH":3},"flags":{"core":{"sourceId":"Compendium.tokenmagic.tmMacros.CdFhWPKBMb5wj7cM"},"scene-packer":{"hash":"c77ac4ac9018e4b85be8ce8bb29a77833cdb9574","sourceId":"Macro.GFfzrfHvccKpNvDv"}},"_id":"fzW9NFXVluy52lsD"}
{"name":"Fatigued","type":"script","author":"CFuphnvvMWNN4aGH","img":"systems/wfrp4e/icons/conditions/fatigued.png","scope":"global","command":"if (args[0] === \"on\") {\nlet params =\n    [{\n        filterType: \"transform\",\n        filterId: \"Fatigued\",\n        bpRadiusPercent: 70,\n        padding: 100,\n        animated:\n        {\n            bpStrength:\n            {\n                animType: \"cosOscillation\",\n                val1: 0,\n                val2: -0.25,\n                loopDuration: 2500,\n            },\n            translationY:\n            {\n                animType: \"cosOscillation\",\n                val1: 0,\n                val2: -0.015,\n                loopDuration: 2500,\n            }\n        }\n    }];\n\nawait TokenMagic.addUpdateFiltersOnSelected(params);\n}\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFiltersOnSelected(\"Fatigued\");\n}","flags":{"furnace":{"runAsGM":false},"core":{"sourceId":"Compendium.tokenmagic.tmMacros.0U6lS2hR1uMm7iFI"},"advanced-macros":{"runAsGM":false}},"ownership":{"default":0,"Njc5YzFjZDI5NjZl":3,"CFuphnvvMWNN4aGH":3},"_stats":{"systemId":"wfrp4e","systemVersion":"6.1.4","coreVersion":"10.288","createdTime":1666185720990,"modifiedTime":1666186306137,"lastModifiedBy":"CFuphnvvMWNN4aGH"},"folder":null,"sort":0,"_id":"vliHi6jSQqG0eXCZ"}
{"name":"Bleeding","type":"script","author":"CFuphnvvMWNN4aGH","img":"systems/wfrp4e/icons/conditions/bleeding.png","scope":"global","command":"if (args[0] === \"on\") {\nlet params =\n    [{\n        filterType: \"splash\",\n        filterId: \"Bleeding\",\n        rank:5,\n        color: 0x990505,\n        padding: 80,\n        splashFactor: 1,\n        spread: 2,\n        blend: 1,\n        dimX: 1,\n        dimY: 1,\n        cut: false,\n        textureAlphaBlend: true,\n        time: Math.random()*100,\n        seed: Math.random(),\n    }];\nawait TokenMagic.addFiltersOnSelected(params);\n}\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFiltersOnSelected(\"Bleeding\");\n}","folder":null,"sort":0,"permission":{"default":0,"Njc5YzFjZDI5NjZl":3,"CFuphnvvMWNN4aGH":3},"flags":{"core":{"sourceId":"Compendium.tokenmagic.tmMacros.XzB3cj1TLsx7qABY"},"scene-packer":{"hash":"4adb3732aa4347ede006dbf2b26b1323cadbb497","sourceId":"Macro.I6UT1Njwnyx9zriL"}},"_id":"zGrMG5RTm4MLDNT8"}
