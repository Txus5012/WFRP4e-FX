{"name":"Surprised","type":"script","author":"CFuphnvvMWNN4aGH","img":"systems/wfrp4e/icons/conditions/surprised.png","scope":"global","command":"if (args[0] === \"on\") {\nlet params =\n[{\n    filterType: \"sprite\",\n    filterId: \"Surprise\",\n    imagePath: \"modules/wfrp4e-fx/images/surprise.webp\",\n    gridPadding: 1,\n    scaleX: 0.20,\n    scaleY: 0.20,\n    colorize: true,\n    color: 0xFFFF00,\n    inverse: false,\n    top: true,\n    animated:\n        {\n            translationY:\n            {\n                active: true,\n                animType: \"cosOscillation\",\n                val1: 1.75,\n                val2: 1.55,\n                loopDuration: 1500,\n            },\n        }\n},\n{\n    filterType: \"sprite\",\n    filterId: \"Surprise\",\n    imagePath: \"modules/wfrp4e-fx/images/surprise.webp\",\n    gridPadding: 1,\n    scaleX: 0.20,\n    scaleY: 0.20,\n    translationX: -1,\n    colorize: true,\n    color: 0xFFFF00,\n    inverse: false,\n    top: true,\n    animated:\n        {\n            translationY:\n            {\n                active: true,\n                animType: \"cosOscillation\",\n                val1: 1.55,\n                val2: 1.75,\n                loopDuration: 1500,\n            },\n        }\n},\n{\n    filterType: \"sprite\",\n    filterId: \"Surprise\",\n    imagePath: \"modules/wfrp4e-fx/images/surprise.webp\",\n    gridPadding: 1,\n    scaleX: 0.20,\n    scaleY: 0.20,\n    translationX: 1,\n    colorize: true,\n    color: 0xFFFF00,\n    inverse: false,\n    top: true,\n    animated:\n        {\n            translationY:\n            {\n                active: true,\n                animType: \"cosOscillation\",\n                val1: 1.55,\n                val2: 1.75,\n                loopDuration: 1500,\n            },\n        }\n}];\n\nawait TokenMagic.addFilters(args[1].sourceToken, params);\n}\n\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFilters(args[1].sourceToken, \"Surprise\");\n}","flags":{"core":{"sourceId":"Macro.2bekjnAG0VHRtXGx"},"advanced-macros":{"runAsGM":false,"runForSpecificUser":""}},"ownership":{"default":0,"f8mJy0XxrFT8Pzt3":3,"CFuphnvvMWNN4aGH":3},"_stats":{"systemId":"wfrp4e","systemVersion":"6.5.2","coreVersion":"10.291","createdTime":1667468424806,"modifiedTime":1682759038229,"lastModifiedBy":"CFuphnvvMWNN4aGH"},"folder":null,"sort":0,"_id":"87mFNsJQFHFXst2l"}
{"name":"Entangled","type":"script","author":"CFuphnvvMWNN4aGH","img":"systems/wfrp4e/icons/conditions/entangled.png","scope":"global","command":"if (args[0] === \"on\") {\nlet params = \n[{\n    filterType: \"web\",\n    filterId: \"Entangled\",\n    time: 0,\n    thickness: 0.4,\n}]\nawait TokenMagic.addUpdateFilters(args[1].sourceToken, params);\n}\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFilters(args[1].sourceToken, \"Entangled\");\n}","folder":null,"sort":0,"flags":{"core":{"sourceId":"Compendium.tokenmagic.tmMacros.ki2AEmXzUJkGpU65"},"scene-packer":{"hash":"91346fa2aa514b211cccb9f252e0611fd31d27f8","sourceId":"Macro.IkN63KTH9RbDdLRe"},"advanced-macros":{"runAsGM":false,"runForSpecificUser":""}},"_id":"9x4e6sJwRtFOF0Jl","ownership":{"default":0,"Njc5YzFjZDI5NjZl":3,"CFuphnvvMWNN4aGH":3},"_stats":{"systemId":"wfrp4e","systemVersion":"6.5.2","coreVersion":"10.291","createdTime":1682702908364,"modifiedTime":1682759038229,"lastModifiedBy":"CFuphnvvMWNN4aGH"}}
{"name":"Toggle Morrslieb","type":"script","author":"CFuphnvvMWNN4aGH","img":"modules/wfrp4e-fx/moon/Morrslieb.webp","scope":"global","command":"let morrsliebActive = canvas.scene.getFlag(\"wfrp4e\", \"morrslieb\")\n    morrsliebActive = !morrsliebActive\n    await canvas.scene.setFlag(\"wfrp4e\", \"morrslieb\", morrsliebActive)\n    if (game.modules.get(\"fxmaster\") && game.modules.get(\"fxmaster\").active) {\n      FXMASTER.filters.switch(\"morrslieb\", \"color\", CONFIG.MorrsliebObject)}\n    else {\n      game.socket.emit(\"system.wfrp4e\", {\n        type: \"morrslieb\"})\n      canvas.draw();}","folder":null,"sort":0,"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.PTLEg7QmjgIMOQI2"},"scene-packer":{"hash":"027848095571d2f3c59c5656e6ff732c6759ba67"}},"_id":"Gmr1KPcXqZnwGf3T","ownership":{"default":0,"CFuphnvvMWNN4aGH":3,"uYMUUn3ngwAi1DKo":3},"_stats":{"systemId":"wfrp4e","systemVersion":"6.5.2","coreVersion":"10.291","createdTime":1682703034212,"modifiedTime":1682759038229,"lastModifiedBy":"CFuphnvvMWNN4aGH"}}
{"name":"Fear","type":"script","author":"CFuphnvvMWNN4aGH","img":"systems/wfrp4e/icons/conditions/fear.png","scope":"global","command":"if (args[0] === \"on\") {\nlet params =\n    [{\n        filterType: \"transform\",\n        filterId: \"Fear\",\n        padding: 50,\n        animated:\n        {\n            translationX:\n            {\n                animType: \"sinOscillation\",\n                val1: -0.00125,\n                val2: +0.00125,\n                loopDuration: 100,\n            },\n            translationY:\n            {\n                animType: \"cosOscillation\",\n                val1: -0.0015,\n                val2: +0.0015,\n                loopDuration: 100,\n            }\n        }\n    }];\nawait TokenMagic.addUpdateFilters(args[1].sourceToken, params);\n}\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFilters(args[1].sourceToken, \"Fear\");\n}","folder":null,"sort":0,"flags":{"scene-packer":{"hash":"f4c2c27a108a44a107b02de2ba73c4b950161605","sourceId":"Macro.3bjNjyJMVKkJFOd0"},"advanced-macros":{"runAsGM":false,"runForSpecificUser":""},"core":{"sourceId":"Macro.3bjNjyJMVKkJFOd0"}},"_id":"JmfNujbBCQ0wuhp6","ownership":{"default":0,"CFuphnvvMWNN4aGH":3},"_stats":{"systemId":"wfrp4e","systemVersion":"6.5.2","coreVersion":"10.291","createdTime":1682702908365,"modifiedTime":1682759038229,"lastModifiedBy":"CFuphnvvMWNN4aGH"}}
{"name":"Broken","type":"script","author":"CFuphnvvMWNN4aGH","img":"systems/wfrp4e/icons/conditions/broken.png","scope":"global","command":"if (args[0] === \"on\") {\nlet params =\n    [{\n        filterType: \"transform\",\n        filterId: \"Broken\",\n        padding: 50,\n        animated:\n        {\n            translationX:\n            {\n                animType: \"sinOscillation\",\n                val1: -0.0125,\n                val2: +0.0125,\n                loopDuration: 200,\n            },\n            translationY:\n            {\n                animType: \"cosOscillation\",\n                val1: -0.0035,\n                val2: +0.0035,\n                loopDuration: 200,\n            }\n        }\n    }];\nawait TokenMagic.addUpdateFilters(args[1].sourceToken, params);\n}\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFilters(args[1].sourceToken, \"Broken\");\n}","folder":null,"sort":0,"flags":{"furnace":{"runAsGM":false},"core":{"sourceId":"Compendium.tokenmagic.tmMacros.0U6lS2hR1uMm7iFI"},"scene-packer":{"hash":"07bd205de21a602d0711fb3e7147d14cf03fe63a","sourceId":"Macro.z9NfkFLHxJt2murp"},"advanced-macros":{"runAsGM":false,"runForSpecificUser":""}},"_id":"PpAEdxe9ImrNKHFa","ownership":{"default":0,"Njc5YzFjZDI5NjZl":3,"CFuphnvvMWNN4aGH":3},"_stats":{"systemId":"wfrp4e","systemVersion":"6.5.2","coreVersion":"10.291","createdTime":1682702908365,"modifiedTime":1682759038230,"lastModifiedBy":"CFuphnvvMWNN4aGH"}}
{"name":"Cold Exposure","type":"script","author":"CFuphnvvMWNN4aGH","img":"icons/magic/water/snowflake-ice-blue-white.webp","scope":"global","command":"if (args[0] === \"on\") {\nlet params =\n    [{\n        filterType: \"smoke\",\n        filterId: \"Cold\",\n        color: 0x80CCFF,\n        time: 0,\n        blend: 2,\n        dimX: 0.3,\n        dimY: 1,\n        animated:\n        {\n            time:\n            {\n                active: true,\n                speed: -0.006,\n                animType: \"move\"\n            },\n            dimY:\n            {\n                val1: 0.4, val2: 0.2,\n                animType: \"cosOscillation\",\n                loopDuration: 3000\n            }\n        }\n    }];\nawait TokenMagic.addUpdateFilters(args[1].sourceToken, params);\n}\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFilters(args[1].sourceToken, \"Cold\");\n}","folder":null,"sort":0,"flags":{"core":{"sourceId":"Compendium.tokenmagic.tmMacros.QkPSIfIOf72oD49L"},"scene-packer":{"hash":"123e3594f79aefc32d34c9ee16ff7de77ee423bf","sourceId":"Macro.BHLQbPF3bVkpjIvh"},"advanced-macros":{"runAsGM":false,"runForSpecificUser":""}},"_id":"TIHeGzzW0OBFaySn","ownership":{"default":0,"Njc5YzFjZDI5NjZl":3,"CFuphnvvMWNN4aGH":3},"_stats":{"systemId":"wfrp4e","systemVersion":"6.5.2","coreVersion":"10.291","createdTime":1682702908365,"modifiedTime":1682759038230,"lastModifiedBy":"CFuphnvvMWNN4aGH"}}
{"name":"Blinded","type":"script","author":"CFuphnvvMWNN4aGH","img":"systems/wfrp4e/icons/conditions/blinded.png","scope":"global","command":"if (args[0] === \"on\") {\nlet params =\n[{\n    filterType: \"fumes\",\n    filterId: \"Blinded\",\n    color: 0x151515,\n    time: 0,\n    blend: 8,\n    animated :\n    {\n      time : \n      { \n        active: true, \n        speed: 0.001, \n        animType: \"move\" \n      }\n    }\n}];\nawait TokenMagic.addUpdateFilters(args[1].sourceToken, params);\n}\n\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFilters(args[1].sourceToken, \"Blinded\");\n}","flags":{"furnace":{"runAsGM":false},"core":{"sourceId":"Compendium.tokenmagic.tmMacros.ebWbFeiJP8UZG4Fd"},"scene-packer":{"hash":"1bc92cc27b8bc60959f5927e328d788ef49823c7","sourceId":"Macro.uwb4PeLqhfAhgfme"},"advanced-macros":{"runAsGM":false,"runForSpecificUser":""}},"_stats":{"systemId":"wfrp4e","systemVersion":"6.5.2","coreVersion":"10.291","createdTime":1665218605844,"modifiedTime":1682759038204,"lastModifiedBy":"CFuphnvvMWNN4aGH"},"_id":"VsIZrgQrW0WHEWIk","folder":null,"sort":0,"ownership":{"default":0,"CFuphnvvMWNN4aGH":3}}
{"name":"Stunned","type":"script","author":"CFuphnvvMWNN4aGH","img":"systems/wfrp4e/icons/conditions/stunned.png","scope":"global","command":"if (args[0] === \"on\") {\nlet params =\n[{\n    filterType: \"blur\",\n    filterId: \"Stunned\",\n    padding: 10,\n    quality: 4.0,\n    blur: 0,\n    blurX: 0,\n    blurY: 0,\n    animated:\n    {\n        blurX: \n        { \n           active: true, \n           animType: \"syncCosOscillation\", \n           loopDuration: 1500, \n           val1: 3, \n           val2: 6\n        },\n        blurY: \n        { \n           active: true, \n           animType: \"syncCosOscillation\", \n           loopDuration: 1750, \n           val1: 3, \n           val2: 6}\n    }\n}];\nawait TokenMagic.addUpdateFilters(args[1].sourceToken, params);\n}\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFilters(args[1].sourceToken, \"Stunned\");\n}","folder":null,"sort":0,"flags":{"core":{"sourceId":"Compendium.tokenmagic.tmMacros.CdFhWPKBMb5wj7cM"},"scene-packer":{"hash":"00271aca0101110ca9fc0ef3cec4afc3035928b5","sourceId":"Macro.O6BWprigvPiZNGvo"},"advanced-macros":{"runAsGM":false,"runForSpecificUser":""}},"_id":"Y69ywmQwQU2Bci59","ownership":{"default":0,"Njc5YzFjZDI5NjZl":3,"CFuphnvvMWNN4aGH":3},"_stats":{"systemId":"wfrp4e","systemVersion":"6.5.2","coreVersion":"10.291","createdTime":1682702908366,"modifiedTime":1682759038230,"lastModifiedBy":"CFuphnvvMWNN4aGH"}}
{"name":"Heat Exposure","type":"script","author":"CFuphnvvMWNN4aGH","img":"icons/magic/fire/flame-burning-earth-orange.webp","scope":"global","command":"if (args[0] === \"on\") {\nlet params =\n    [{\n        filterType: \"smoke\",\n        filterId: \"Heat\",\n        color: 0xDF641F,\n        time: 0,\n        blend: 2,\n        dimX: 0.3,\n        dimY: 1,\n        animated:\n        {\n            time:\n            {\n                active: true,\n                speed: -0.006,\n                animType: \"move\"\n            },\n            dimX:\n            {\n                val1: 0.4, val2: 0.2,\n                animType: \"cosOscillation\",\n                loopDuration: 3000\n            }\n        }\n    }];\nawait TokenMagic.addUpdateFilters(args[1].sourceToken, params);\n}\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFilters(args[1].sourceToken, \"Heat\");\n}","folder":null,"sort":0,"flags":{"core":{"sourceId":"Compendium.tokenmagic.tmMacros.QkPSIfIOf72oD49L"},"scene-packer":{"hash":"f60cc4093e01674caa1713d3c522e4dbf9114f14","sourceId":"Macro.DI8lMamQx2ZETXPi"},"advanced-macros":{"runAsGM":false,"runForSpecificUser":""}},"_id":"YHCknZRAndHhqaaO","ownership":{"default":0,"Njc5YzFjZDI5NjZl":3,"CFuphnvvMWNN4aGH":3},"_stats":{"systemId":"wfrp4e","systemVersion":"6.5.2","coreVersion":"10.291","createdTime":1682702908366,"modifiedTime":1682759038230,"lastModifiedBy":"CFuphnvvMWNN4aGH"}}
{"name":"Poisoned","type":"script","author":"CFuphnvvMWNN4aGH","img":"systems/wfrp4e/icons/conditions/poisoned.png","scope":"global","command":"if (args[0] === \"on\") {\nlet params =\n[{\n    filterType: \"field\",\n    filterId: \"Poisoned\",\n    shieldType: 3,\n    gridPadding: 1,\n    color: 0x25b11b,\n    time: 0,\n    blend: 0,\n    intensity: 0.9,\n    lightAlpha: 1,\n    lightSize: 0.7,\n    scale: 1,\n    radius: 1,\n    chromatic: false,\n    zOrder: 512,\n    animated :\n    {\n      time : \n      { \n        active: true, \n        speed: 0.0015, \n        animType: \"move\" \n      }\n    }\n}];\nawait TokenMagic.addUpdateFilters(args[1].sourceToken, params);\n}\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFilters(args[1].sourceToken, \"Poisoned\");\n}","folder":null,"sort":0,"flags":{"scene-packer":{"hash":"e35936904a5de1010431f40a8a7ba70602b45833","sourceId":"Macro.FpJrBp6TjFL0tSlc"},"advanced-macros":{"runAsGM":false,"runForSpecificUser":""},"core":{"sourceId":"Macro.FpJrBp6TjFL0tSlc"}},"_id":"YzbaAGT1nDDqk28M","ownership":{"default":0,"CFuphnvvMWNN4aGH":3},"_stats":{"systemId":"wfrp4e","systemVersion":"6.5.2","coreVersion":"10.291","createdTime":1682702908367,"modifiedTime":1682759038230,"lastModifiedBy":"CFuphnvvMWNN4aGH"}}
{"name":"Ablaze","type":"script","author":"CFuphnvvMWNN4aGH","img":"systems/wfrp4e/icons/conditions/ablaze.png","scope":"global","command":"let sourceToken = args[1].sourceToken\n\nif (args[0] === \"on\") {\nlet params =\n[{\n    filterType: \"fire\",\n    filterId: \"Ablaze\",\n    intensity: 1,\n    color: 0xFFFFFF,\n    amplitude: 1,\n    time: 0,\n    blend: 2,\n    fireBlend : 1,\n    animated :\n    {\n      time : \n      { \n        active: true, \n        speed: -0.0024, \n        animType: \"move\" \n      },\n      intensity:\n      {\n        active:true,\n        loopDuration: 15000,\n        val1: 0.8,\n        val2: 2,\n        animType: \"syncCosOscillation\"\n      },\n      amplitude:\n      {\n        active:true,\n        loopDuration: 4400,\n        val1: 1,\n        val2: 1.4,\n        animType: \"syncCosOscillation\"\n      }\n    }\n}];\nawait TokenMagic.addUpdateFilters(args[1].sourceToken, params);\n\nif (game.settings.get(moduleID, 'light&vision')) {\n  await sourceToken.document.update({\n    light: {\n    alpha: 0.25,\n    animation: {\n       intensity: 4,\n       speed: 7,\n       type: \"flame\"\n       },\n   color: \"#ffaa00\",\n   dim: 15,\n   bright: 7.5\n   }})\nsourceToken.refresh(true)\n}}\n\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFilters(args[1].sourceToken, \"Ablaze\");\n\nif (game.settings.get(moduleID, 'light&vision')) {\n  await sourceToken.document.update({\n    light: {\n    alpha: 0,\n    animation: {\n       intensity: 0,\n       speed: 0,\n       type: \"none\"\n       },\n   color: null,\n   dim: 0,\n   bright: 0\n   }})\nsourceToken.refresh(true)\n}}","flags":{"scene-packer":{"hash":"85d4901ac1362b870da4d5b6c7e719327817e732","sourceId":"Macro.tSLHvf9LzAQ68W97"},"advanced-macros":{"runAsGM":false,"runForSpecificUser":""},"core":{"sourceId":"Macro.tSLHvf9LzAQ68W97"}},"_stats":{"systemId":"wfrp4e","systemVersion":"6.5.2","coreVersion":"10.291","createdTime":1665218604109,"modifiedTime":1682759038204,"lastModifiedBy":"CFuphnvvMWNN4aGH"},"_id":"eLhdaZgYb26jwWSn","folder":null,"sort":0,"ownership":{"default":0,"CFuphnvvMWNN4aGH":3}}
{"name":"Morsslieb Phase","type":"script","author":"CFuphnvvMWNN4aGH","img":"modules/wfrp4e-fx/moon/Morrslieb.webp","scope":"global","command":"let morrsliebActive = canvas.scene.getFlag(\"wfrp4e\", \"morrslieb\")\nif (morrsliebActive) {\n    morrsliebActive = !morrsliebActive\n    await canvas.scene.setFlag(\"wfrp4e\", \"morrslieb\", morrsliebActive)\n    if (game.modules.get(\"fxmaster\") && game.modules.get(\"fxmaster\").active) {\n      FXMASTER.filters.switch(\"morrslieb\", \"color\", CONFIG.MorrsliebObject)}\n    else {\n      game.socket.emit(\"system.wfrp4e\", {\n        type: \"morrslieb\"})\n      canvas.draw();}\n}\nelse\n{\nconst table = game.tables.find(t => t.name == game.i18n.localize(\"MORRSLIEB.TableLanguage\"));\nlet roll = await table.draw();\nif (roll.results[0].data.text == game.i18n.localize(\"MORRSLIEB.FullMoon\"))\n {\n    morrsliebActive = !morrsliebActive\n    await canvas.scene.setFlag(\"wfrp4e\", \"morrslieb\", morrsliebActive)\n    if (game.modules.get(\"fxmaster\") && game.modules.get(\"fxmaster\").active) {\n      FXMASTER.filters.switch(\"morrslieb\", \"color\", CONFIG.MorrsliebObject)}\n    else {\n      game.socket.emit(\"system.wfrp4e\", {\n        type: \"morrslieb\"})\n      canvas.draw();}\n }\n}","folder":null,"sort":0,"flags":{"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.JQzROCRSoKreFTBz"},"scene-packer":{"hash":"3e7b3c26d27fec8238e31f07d4900e97a9c10223","sourceId":"Macro.JXGrby0IGImCp4ey"}},"_id":"eiR9DzHuUfiNaNPJ","ownership":{"default":0,"CFuphnvvMWNN4aGH":3},"_stats":{"systemId":"wfrp4e","systemVersion":"6.5.2","coreVersion":"10.291","createdTime":1665221710675,"modifiedTime":1682759038230,"lastModifiedBy":"CFuphnvvMWNN4aGH"}}
{"name":"Consume Alcohol","type":"script","author":"CFuphnvvMWNN4aGH","img":"icons/consumables/drinks/alcohol-beer-stein-wooden-brown.webp","scope":"global","command":"if (args[0] === \"on\") {\nlet params =\n[{\n    filterType: \"blur\",\n    filterId: \"Alcohol\",\n    padding: 10,\n    quality: 4.0,\n    blur: 0,\n    blurX: 0,\n    blurY: 0,\n    animated:\n    {\n        blurX: \n        { \n           active: true, \n           animType: \"syncCosOscillation\", \n           loopDuration: 1500, \n           val1: 3, \n           val2: 6\n        },\n        blurY: \n        { \n           active: true, \n           animType: \"syncCosOscillation\", \n           loopDuration: 1750, \n           val1: 3, \n           val2: 6}\n    }\n}];\nawait TokenMagic.addUpdateFilters(args[1].sourceToken, params);\n}\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFilters(args[1].sourceToken, \"Alcohol\");\n}","folder":null,"sort":0,"flags":{"core":{"sourceId":"Compendium.tokenmagic.tmMacros.CdFhWPKBMb5wj7cM"},"scene-packer":{"hash":"5133d5f765959a4a92fc7b222b3e9f4de65c7116","sourceId":"Macro.GFfzrfHvccKpNvDv"},"advanced-macros":{"runAsGM":false,"runForSpecificUser":""}},"_id":"fzW9NFXVluy52lsD","ownership":{"default":0,"Njc5YzFjZDI5NjZl":3,"CFuphnvvMWNN4aGH":3},"_stats":{"systemId":"wfrp4e","systemVersion":"6.5.2","coreVersion":"10.291","createdTime":1682702908367,"modifiedTime":1682759038230,"lastModifiedBy":"CFuphnvvMWNN4aGH"}}
{"name":"Unconscious","type":"script","scope":"global","author":"CFuphnvvMWNN4aGH","img":"systems/wfrp4e/icons/conditions/unconscious.png","command":"let sourceToken = args[1].sourceToken\nlet initialRange = token.actor.prototypeToken.sight.range;\nlet initialvisionMode = token.actor.prototypeToken.sight.visionMode;\n\nif (args[0] === \"on\") {\nlet params =\n[{\n    filterType: \"sprite\",\n    filterId: \"Unconscious\",\n    imagePath: \"modules/wfrp4e-fx/images/star.webp\",\n    gridPadding: 1,\n    scaleX: 0.1,\n    scaleY: 0.1,\n    inverse: false,\n    top: true,\n    animated:\n        {\n          translationX:\n            {\n                active: true,\n                animType: \"cosOscillation\",\n                val1: 2.0,\n                val2: -2.0,\n                loopDuration: 2000,\n            },\n            translationY:\n            {\n                active: true,\n                animType: \"sinOscillation\",\n                val1: 4.0,\n                val2: 3.0,\n                loopDuration: 2000,\n            }\n        }\n}]\nTokenMagic.addFilters(args[1].sourceToken, params);\n\nsetTimeout(function (){\nTokenMagic.addFilters(args[1].sourceToken, params);\n}, 500);\n\nsetTimeout(function (){\nTokenMagic.addFilters(args[1].sourceToken, params);\n}, 1000);\n\nsetTimeout(function (){\nTokenMagic.addFilters(args[1].sourceToken, params);\n}, 1500);\n\nif (game.settings.get(moduleID, 'light&vision')) {\n   await sourceToken.document.update({\n        sight: {\n           range: 0,\n           visionMode: \"tremorsense\"\n          }\n     })\nsourceToken.refresh(true)\n}\n\n}\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFilters(args[1].sourceToken, \"Unconscious\");\n\nif (game.settings.get(moduleID, 'light&vision')) {\n  await sourceToken.document.update({\n        sight: {\n           range: initialRange,\n           visionMode: initialvisionMode \n          }\n     })\nsourceToken.refresh(true)\n}}","ownership":{"default":0,"CFuphnvvMWNN4aGH":3},"flags":{"advanced-macros":{"runAsGM":false,"runForSpecificUser":""},"core":{"sourceId":"Compendium.wfrp4e-fx.wfrp4efxmacros.hWW6cdsUVebZuHL3"}},"_stats":{"systemId":"wfrp4e","systemVersion":"6.5.2","coreVersion":"10.291","createdTime":1667507337790,"modifiedTime":1682759038230,"lastModifiedBy":"CFuphnvvMWNN4aGH"},"folder":null,"sort":0,"_id":"hWW6cdsUVebZuHL3"}
{"name":"Fatigued","type":"script","author":"CFuphnvvMWNN4aGH","img":"systems/wfrp4e/icons/conditions/fatigued.png","scope":"global","command":"if (args[0] === \"on\") {\nlet params =\n    [{\n        filterType: \"transform\",\n        filterId: \"Fatigued\",\n        bpRadiusPercent: 70,\n        padding: 100,\n        animated:\n        {\n            bpStrength:\n            {\n                animType: \"cosOscillation\",\n                val1: 0,\n                val2: -0.25,\n                loopDuration: 2500,\n            },\n            translationY:\n            {\n                animType: \"cosOscillation\",\n                val1: 0,\n                val2: -0.015,\n                loopDuration: 2500,\n            }\n        }\n    }];\n\nawait TokenMagic.addUpdateFilters(args[1].sourceToken, params);\n}\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFilters(args[1].sourceToken, \"Fatigued\");\n}","flags":{"furnace":{"runAsGM":false},"core":{"sourceId":"Compendium.tokenmagic.tmMacros.0U6lS2hR1uMm7iFI"},"advanced-macros":{"runAsGM":false,"runForSpecificUser":""}},"ownership":{"default":0,"Njc5YzFjZDI5NjZl":3,"CFuphnvvMWNN4aGH":3},"_stats":{"systemId":"wfrp4e","systemVersion":"6.5.2","coreVersion":"10.291","createdTime":1666185720990,"modifiedTime":1682759038230,"lastModifiedBy":"CFuphnvvMWNN4aGH"},"folder":null,"sort":0,"_id":"vliHi6jSQqG0eXCZ"}
{"name":"Bleeding","type":"script","author":"CFuphnvvMWNN4aGH","img":"systems/wfrp4e/icons/conditions/bleeding.png","scope":"global","command":"if (args[0] === \"on\") {\nlet params =\n    [{\n        filterType: \"splash\",\n        filterId: \"Bleeding\",\n        rank:5,\n        color: 0x990505,\n        padding: 80,\n        splashFactor: 1,\n        spread: 2,\n        blend: 1,\n        dimX: 1,\n        dimY: 1,\n        cut: false,\n        textureAlphaBlend: true,\n        time: Math.random()*100,\n        seed: Math.random(),\n    }];\nawait TokenMagic.addFilters(args[1].sourceToken, params);\n}\nif (args[0] === \"off\") {\nawait TokenMagic.deleteFilters(args[1].sourceToken, \"Bleeding\");\n}","folder":null,"sort":0,"flags":{"core":{"sourceId":"Compendium.tokenmagic.tmMacros.XzB3cj1TLsx7qABY"},"scene-packer":{"hash":"567f8d97ad4f31eaab2808e1ab30961e176c7508","sourceId":"Macro.I6UT1Njwnyx9zriL"},"advanced-macros":{"runAsGM":false,"runForSpecificUser":""}},"_id":"zGrMG5RTm4MLDNT8","ownership":{"default":0,"Njc5YzFjZDI5NjZl":3,"CFuphnvvMWNN4aGH":3},"_stats":{"systemId":"wfrp4e","systemVersion":"6.5.2","coreVersion":"10.291","createdTime":1682702908368,"modifiedTime":1682759038230,"lastModifiedBy":"CFuphnvvMWNN4aGH"}}
